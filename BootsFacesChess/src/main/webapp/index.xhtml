<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:b="http://bootsfaces.net/ui"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:c="http://java.sun.com/jstl/core">

<h:head>
  <style>
.nav-tabs>li.active>a, .nav-tabs>li.active>a:hover, .nav-tabs>li.active>a:focus
	{
	background-color: #ddd !important;
}
</style>
</h:head>
<h:body style="padding-top:55px">
  <b:container id="menu">
    <h:form>
      <b:navBar brand="BootsFaces plays chess!" inverse="true"
        brandHref="#" fixed="top">
        <b:navbarLinks>
          <b:navCommandLink value="New game (white)" iconAwesome="home"
            actionListener="#{board.newGameWhite}" ajax="true"
            update=":content" />
          <b:navCommandLink value="New game (black)" icon="cross" actionListener="#{board.newGameBlack}" ajax="true"
            update=":content" />
          <b:navCommandLink value="Flip sides"
            actionListener="#{board.flipSides}" ajax="true"
            update=":content" />
          <b:navLink value="About" href="#"></b:navLink>
        </b:navbarLinks>
      </b:navBar>
    </h:form>
  </b:container>

  <b:container id="content">
    <h:form id="form" style="margin-bottom:-10px">
      <b:row>
        <b:column span="8">
          <b:panel title="#{board.title}" id="board" look="info"
            contentStyle="height:580px">
            <ui:repeat id="rows" var="row" value="#{board.rows}"
              varStatus="rowStatus">
              <div style="width: 560px; height: 68px; overflow: auto;">
                <ui:repeat id="fields" var="image" value="#{row.images}"
                  varStatus="columnStatus">
                  <b:image value="#{image}"
                    style="width:68px;height:68px;;display:inline-block;#{board.getOpacityAndBorder(rowStatus.index,columnStatus.index)}"
                    onclick="ajax:board.onclick(rowStatus.index,columnStatus.index)"
                    oncomplete="document.getElementById('form:opponent').click()"
                    update="@form :messages" />
                </ui:repeat>
              </div>
            </ui:repeat>
          </b:panel>
        </b:column>
        <b:column span="4">
          <b:panel title="History" contentStyle="height:240px" look="info">
            <b:panelGrid id="historyGrid" colSpans="5,7"
              style="width:300px;height:220px;overflow-y: auto;overflow-x:hidden">
              <c:forEach items="#{board.history}" var="move">
                <h:outputText value="#{move}" />
              </c:forEach>
            </b:panelGrid>
            <script>
													var grid = document
															.getElementById('form:historyGrid');
													grid.scrollTop = grid.scrollHeight;
												</script>
          </b:panel>
          <b:panel look="info"
            title="Settings #{settings.economyMode?' (restricted to save CPU time)':''}"
            contentStyle="height:140px">
            <b:panelGrid colSpans="6,6">
              <h:outputText value="Look-ahead:" />
              <b:inputText value="#{settings.lookAhead}" />
              <h:outputText value="Calculation breadth:" />
              <b:inputText value="#{settings.movesToConsider}" />
              <h:outputText value="multithreading" />
              <b:selectBooleanCheckbox
                value="#{settings.multithreading}" />
            </b:panelGrid>
          </b:panel>

          <b:panel title="statistics" contentStyle="height:80px" look="info">
            <b:panelGrid colSpans="6,6">
              <h:outputText value="Elapsed time:" />
              <h:outputText value="#{board.elapsedTime}" />
              <h:outputText value="CPU time:" />
              <h:outputText value="#{board.cpuTime}" />
              <h:outputText value="evaluated moves:" />
              <h:outputText value="#{board.evaluatedMoves}" />
            </b:panelGrid>
          </b:panel>
        </b:column>
      </b:row>
      <b:commandButton value="computer's move" id="opponent"
        actionListener="#{board.opponentsMove}" ajax="true"
        update="@form" style="display:none" />
    </h:form>
    <b:messages id="messages" showDetail="false" showSummary="false"/>
  </b:container>
</h:body>
</html>